<style>
.webring {
  width: calc(100% - 2rem);
  max-width: 800px;
  margin: 0 auto;
}

.webring .attribution {
  float: right;
  font-size: .8rem;
  color: #555;
  line-height: 3;
}

.webring .title {
  margin: 0;
}

.webring .articles {
  display: flex;
  gap: 1rem;
}

.webring .article {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: rgba(255, 255, 255, 0.1);
  padding: .5rem;
}

.webring .summary {
  flex: 1;
}
</style>

{{ $channels := slice }}
{{ $articles := slice }}
{{ range $url := .feeds }}
  {{ with resources.GetRemote $url }}  
    {{ with .Err }}
      {{ errorf "%s" . }}
    {{ else }}
      {{ $data := transform.Unmarshal .Content }}
      {{ $article := index $data.channel.item 0 }}

      {{ $channels = append $data.channel $channels}}
      {{ $articles = append $article $articles}}

      <!-- {{ range $data.channel.item }}
      -- Article: {{ .title }}
      <br />
      {{ end }} -->
    {{ end }}
  {{ end }}
{{ end }}

<section class="webring">
  <h2>
    {{ with .title }}
      {{ . }}
    {{ else }}
      More interesting posts
    {{ end }}
    <small class="attribution">
      Generated by
      <a href="https://git.sr.ht/~sircmpwn/openring">hugo-webring</a>
    </small>
  </h2>
  <section class="articles">
    {{ range $index := seq 0 2 }}
      {{ $channel := index $channels $index }}
      {{ $article := index $articles $index }}
      <div class="article">
        <h4 class="title">
          <a href="{{ $article.link }}" target="_blank" rel="noopener">{{ $article.title | truncate 60 }}</a>
        </h4>
        <p class="summary">{{ $article.description | plainify | truncate 150 }}</p>
        <small class="source">
          {{ $url := index $channel.link 0 }}
          via <a href="{{ $url }}">
            {{ with $channel.title }}
              {{ $channel.title }}
            {{ else }}
              {{ (urls.Parse $url).Host }}	
            {{ end }}
          </a>
        </small>
        <small class="date">{{  time.Format "2 Jan 2006" (time.AsTime $article.pubDate) }}</small>
      </div>
    {{ end }}
  </section>
</section>
